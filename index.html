<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Think Before You Press</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      /* ----------------- RESET ----------------- */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", system-ui, sans-serif;
      }

      /* ----------------- VARIABLES ----------------- */
      :root {
        --red-main: #e10600;
        --red-glow: rgba(225, 6, 0, 0.9);
        --bg1: #0b0d12;
        --bg2: #141824;
        --text-main: #f5f5f5;
      }

      /* ----------------- BODY ----------------- */
      body {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: radial-gradient(circle at top, var(--bg2), var(--bg1));
        overflow: hidden;
        color: var(--text-main);
        position: relative;
      }

      /* ----------------- BACKGROUND ANIMATION ----------------- */
      body::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
          radial-gradient(
            circle at 20% 30%,
            rgba(255, 0, 0, 0.08),
            transparent 40%
          ),
          radial-gradient(
            circle at 80% 70%,
            rgba(255, 0, 0, 0.05),
            transparent 40%
          );
        animation: bgMove 20s alternate infinite ease-in-out;
        z-index: 0;
      }
      @keyframes bgMove {
        0% {
          transform: scale(1) translate(0, 0);
        }
        100% {
          transform: scale(1.15) translate(-30px, 20px);
        }
      }

      /* ----------------- GAME CONTAINER ----------------- */
      .game {
        position: relative;
        z-index: 2;
        width: 90%;
        max-width: 520px;
        text-align: center;
      }
      .level {
        opacity: 0.6;
        letter-spacing: 2px;
        margin-bottom: 14px;
        animation: fadeSlide 0.6s ease;
      }
      .instruction {
        font-size: 1.35rem;
        min-height: 90px;
        margin-bottom: 45px;
        animation: fadeSlide 0.6s ease;
      }

      /* ----------------- BUTTON ----------------- */
      .button-wrap {
        position: relative;
        display: inline-block;
      }
      .button {
        width: 190px;
        height: 190px;
        border-radius: 50%;
        border: none;
        background: radial-gradient(circle at top, #ff5a5a, var(--red-main));
        box-shadow:
          0 0 45px var(--red-glow),
          inset 0 -12px 22px rgba(0, 0, 0, 0.4);
        cursor: pointer;
        animation: breathe 2.6s infinite ease-in-out;
        transition: transform 0.08s ease;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        color: white;
        user-select: none;
      }
      .button:active {
        transform: scale(0.9);
      }

      /* ----------------- BUTTON RIPPLE ----------------- */
      .ripple {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.5);
        animation: ripple 0.6s ease-out;
        pointer-events: none;
      }

      /* ----------------- PARTICLE EFFECT ----------------- */
      .particle {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #ff4a4a;
        pointer-events: none;
        opacity: 0.8;
      }

      /* ----------------- COUNTDOWN RING ----------------- */
      .ring {
        position: absolute;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 5px solid rgba(255, 255, 255, 0.3);
        top: -5px;
        left: -5px;
        transform: rotate(-90deg);
        pointer-events: none;
      }
      .ring svg {
        width: 100%;
        height: 100%;
      }
      .ring svg circle {
        fill: none;
        stroke: white;
        stroke-width: 5;
        stroke-dasharray: 628;
        stroke-dashoffset: 628;
        transition: stroke-dashoffset 0.1s linear;
      }

      /* ----------------- ANIMATIONS ----------------- */
      @keyframes breathe {
        0% {
          box-shadow: 0 0 35px var(--red-glow);
        }
        50% {
          box-shadow: 0 0 70px rgba(255, 80, 80, 1);
        }
        100% {
          box-shadow: 0 0 35px var(--red-glow);
        }
      }
      @keyframes ripple {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(1.6);
          opacity: 0;
        }
      }
      @keyframes fadeSlide {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .shake {
        animation: shake 0.4s;
      }
      @keyframes shake {
        0% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        50% {
          transform: translateX(10px);
        }
        75% {
          transform: translateX(-10px);
        }
        100% {
          transform: translateX(0);
        }
      }
      .flash {
        animation: flash 0.15s alternate 8;
      }
      @keyframes flash {
        from {
          background-color: var(--bg1);
        }
        to {
          background-color: #300;
        }
      }
    </style>
  </head>
  <body>
    <div class="game" id="game">
      <div class="level" id="levelText"></div>
      <div class="instruction" id="instruction"></div>

      <div class="button-wrap" id="btnWrap">
        <button class="button" id="btn"><span id="countdown"></span></button>
        <div class="ring" id="ring">
          <svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="100" /></svg>
        </div>
      </div>
    </div>

    <audio id="audio" src="Victory sound.mp3"></audio>

    <script>
      // ----------------- VARIABLES -----------------
      let level = 0;
      let presses = 0;
      let startTime = Date.now();
      let locked = false;
      let lastPressOdd = false;

      const btn = document.getElementById("btn");
      const instruction = document.getElementById("instruction");
      const levelText = document.getElementById("levelText");
      const game = document.getElementById("game");
      const audio = document.getElementById("audio");
      const btnWrap = document.getElementById("btnWrap");
      const ring = document.querySelector(".ring circle");
      const countdown = document.getElementById("countdown");

      // ----------------- LEVELS (LOGIC + TIMERS + TRICK) -----------------
      const levelsData = [
        { text: "Press the button once.", type: "press", count: 1 },
        { text: "Press twice in total this level.", type: "press", count: 2 },
        { text: "Do nothing for 3 seconds.", type: "wait", time: 3 },
        { text: "Press after 2 seconds.", type: "timed", min: 2 },
        {
          text: "Press only if last level had odd presses.",
          type: "logic",
          condition: () => lastPressOdd,
        },
        { text: "Press when seconds are even.", type: "even" },
        {
          text: "Press only if current level number is divisible by 2.",
          type: "logic",
          condition: () => level % 2 === 0,
        },
        { text: "Wait 4 seconds, then press once.", type: "timed", min: 4 },
        {
          text: "Press only if instruction text contains letter 'e'.",
          type: "logic",
          condition: () => instruction.textContent.includes("e"),
        },
        { text: "Press once.", type: "press", count: 1 },

        {
          text: "Press only if previous press count was 1.",
          type: "logic",
          condition: () => presses === 1,
        },
        { text: "Wait 5 seconds.", type: "wait", time: 5 },
        { text: "Press once after 3 seconds.", type: "timed", min: 3 },
        {
          text: "Do nothing if the current second is multiple of 3.",
          type: "logic",
          condition: () => elapsed() % 3 !== 0,
        },
        { text: "Press twice.", type: "press", count: 2 },

        { text: "Wait 6 seconds.", type: "wait", time: 6 },
        {
          text: "Press if you are ready (always true).",
          type: "logic",
          condition: () => true,
        },
        { text: "Press once.", type: "press", count: 1 },
        { text: "Wait until seconds are even.", type: "even" },
        { text: "Final! Press the button for a surprise.", type: "final" },
      ];

      // ----------------- FUNCTIONS -----------------
      function elapsed() {
        return Math.floor((Date.now() - startTime) / 1000);
      }

      function loadLevel() {
        presses = 0;
        locked = false;
        startTime = Date.now();
        levelText.textContent = `LEVEL ${level + 1}/20`;
        instruction.textContent = levelsData[level].text;
        ring.style.strokeDashoffset = 628;
        countdown.textContent = "";
      }

      function fail() {
        locked = true;
        game.classList.add("shake");
        setTimeout(loadLevel, 500);
      }
      function complete() {
        locked = true;
        lastPressOdd = presses % 2 === 1;
        level++;
        if (level < levelsData.length) {
          game.classList.add("shake");
          setTimeout(loadLevel, 600);
        }
      }

      // ----------------- PARTICLE EFFECT -----------------
      function createParticles(x, y) {
        for (let i = 0; i < 20; i++) {
          const p = document.createElement("div");
          p.className = "particle";
          btnWrap.appendChild(p);
          const angle = Math.random() * 2 * Math.PI,
            dist = 30 + Math.random() * 50;
          p.style.left = `${x}px`;
          p.style.top = `${y}px`;
          const dx = Math.cos(angle) * dist,
            dy = Math.sin(angle) * dist;
          p.animate(
            [
              { transform: `translate(0,0)`, opacity: 1 },
              { transform: `translate(${dx}px,${dy}px)`, opacity: 0 },
            ],
            { duration: 700, easing: "ease-out" },
          );
          setTimeout(() => p.remove(), 700);
        }
      }

      // ----------------- COUNTDOWN RING -----------------
      function updateRing() {
        const l = levelsData[level];
        if (["wait", "timed", "even"].includes(l.type)) {
          let t = elapsed();
          let duration = l.time || 5;
          if (l.type === "timed" && l.min) duration = l.min + 1;
          let pct = Math.min(t / duration, 1);
          ring.style.strokeDashoffset = 628 * (1 - pct);
          countdown.textContent = Math.max(duration - t, 0);
        } else {
          ring.style.strokeDashoffset = 628;
          countdown.textContent = "";
        }
      }

      // ----------------- BUTTON CLICK -----------------
      btn.addEventListener("click", (e) => {
        if (locked) return;
        presses++;
        createParticles(95, 95);
        const l = levelsData[level];
        const t = elapsed();

        if (l.type === "final") {
          audio.volume = 1;
          audio.play();
          document.body.classList.add("flash");
          instruction.textContent =
            "Pag nabasa moto proud ako sayo kasi isa kang malaking uto uto";
          locked = true;
          return;
        }

        if (l.type === "press") {
          if (presses === l.count) complete();
          else if (presses > l.count) fail();
        }
        if (l.type === "timed") {
          if (presses === 1 && t >= l.min) complete();
          else if (presses > 1) fail();
        }
        if (l.type === "even") {
          if (presses === 1 && t % 2 === 0) complete();
          else fail();
        }
        if (l.type === "logic") {
          if (l.condition()) complete();
          else fail();
        }
      });

      // ----------------- AUTO COMPLETE FOR WAIT LEVELS -----------------
      setInterval(() => {
        const l = levelsData[level];
        if (!locked && l.type === "wait" && elapsed() >= l.time) complete();
        updateRing();
      }, 100);

      loadLevel();
    </script>
  </body>
</html>


